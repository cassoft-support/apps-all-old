# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è app.cassoft.ru# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è app.cassoft.ru



> **–°—Ç–∞—Ç—É—Å:** ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è> **–°—Ç–∞—Ç—É—Å:** üìã –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–∞



## –û–ø–∏—Å–∞–Ω–∏–µ## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞



**app.cassoft.ru** - –∫–æ–ª–ª–µ–∫—Ü–∏—è –ë–∏—Ç—Ä–∏–∫—Å24 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ—Ç Cassoft, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã, HR-—Ä–µ—à–µ–Ω–∏—è, —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –¥—Ä—É–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –ë–∏—Ç—Ä–∏–∫—Å24 CRM.**app.cassoft.ru** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24 CRM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å—é (—Ä–∏—ç–ª—Ç–æ—Ä—Å–∫–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å).



## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞–º–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

- **Backend:** PHP 8.2-FPM- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM (–°–¥–µ–ª–∫–∏, –ö–æ–Ω—Ç–∞–∫—Ç—ã, –ö–æ–º–ø–∞–Ω–∏–∏)

- **Frontend:** JavaScript (jQuery 3.6.0, Dropzone.js, CKEditor 5, Select2), HTML5, CSS3- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤

- **Platform:** –ë–∏—Ç—Ä–∏–∫—Å24 CRM (REST API)- (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞)

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** MySQL/MariaDB —á–µ—Ä–µ–∑ –ë–∏—Ç—Ä–∏–∫—Å24

- **Highload –±–ª–æ–∫–∏:** –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π---

- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** PHP-–∫–µ—à

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

## –°–ø–∏—Å–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

### Backend

### 1. MCM (Multi-Channel Messenger) üî¥ –°–¢–ê–†–ê–Ø –í–ï–†–°–ò–Ø- **PHP:** 8.2-FPM

- **Platform:** –ë–∏—Ç—Ä–∏–∫—Å24 REST API

**–°—Ç–∞—Ç—É—Å:** –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è, –Ω–æ–≤–∞—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  - **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** MySQL/MariaDB (—á–µ—Ä–µ–∑ –ë–∏—Ç—Ä–∏–∫—Å24)

**–ü—É—Ç–∏:** - **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** PHP-–∫–µ—à, –≤–æ–∑–º–æ–∂–Ω–æ Memcached/Redis

- `cassoftApp/market/mcm/` - —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è

- `cs-app/mcm/` - –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)### Frontend

- **JavaScript:** ES6+ (jQuery 3.6.0, Dropzone.js, CKEditor 5, Select2)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú—É–ª—å—Ç–∏–∫–∞–Ω–∞–ª—å–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–∞–Ω–∞–ª–∞–º–∏ —Å–≤—è–∑–∏ (WhatsApp, Telegram, VK –∏ –¥—Ä.)- **HTML:** HTML5

- **CSS:** CSS3

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**- **–®–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä:** PHP (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ë–∏—Ç—Ä–∏–∫—Å24)

- `index.php` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- `install.php` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- `install_connector.php` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –ª–∏–Ω–∏–π –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∫–∞–Ω–∞–ª–æ–≤- **–°–µ—Ä–≤–µ—Ä:** 83.220.174.34

- `ajax/` - AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** bitirx-brokci

- `in/` - –≤—Ö–æ–¥—è—â–∏–µ webhooks –æ—Ç –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤- **–ü—É—Ç—å:** `/var/www/bitirx-brokci/data/www/app.cassoft.ru`

- `bot/` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±–æ—Ç–æ–≤- **Web-—Å–µ—Ä–≤–µ—Ä:** Nginx + PHP-FPM

- **Git:** –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `dashboard:main_app` (template: `mcm`)- **CI/CD:** –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è GitHub Actions



**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**---

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ Highload –±–ª–æ–∫ `app_mcm_access`

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `logIndex.txt`## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ layout

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---```

/local/components/

### 2. Change Assigned (–°–º–µ–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ)  /[vendor]/

    /[component_name]/

**–ü—É—Ç—å:** `cassoftApp/market/changeAssigned/`      component.php          - –ª–æ–≥–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

      .description.php       - –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π —Å–º–µ–Ω—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤ —Å–¥–µ–ª–∫–∞—Ö –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö –ë–∏—Ç—Ä–∏–∫—Å24      /templates/

        /[template_name]/

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**          template.php       - HTML —à–∞–±–ª–æ–Ω

- `index.php` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞          style.css          - —Å—Ç–∏–ª–∏

- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `app_change_assigned_access`          script.js          - JavaScript

      /ajax/

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `dashboard:main_app` (template: `change_assigned`)        ajax.php             - AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–æ—Å—Ç—É–ø–∞**–¢—Ä–µ–±—É–µ—Ç—Å—è:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∏–¥–∂–µ—Ç–æ–º —á–∞—Ç–∞ –ë–∏—Ç—Ä–∏–∫—Å24

### REST API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

---–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∞—Å—Å `CRest` –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24 REST API.



### 3. CIAN Messager (–¶–∏–∞–Ω –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä)**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**

- `disk.folder.uploadfile` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

**–ü—É—Ç—å:** `cassoftApp/market/cianMessager/`- `crm.deal.get` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏

- `crm.deal.update` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º CIAN –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –ø–æ –æ–±—ä–µ–∫—Ç–∞–º –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏- `crm.deal.fields` - –ø–æ–ª—è —Å–¥–µ–ª–∫–∏



**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:****–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ [REST_API.md](REST_API.md)

- `index.php` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

- `install.php` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞---

- `install_connector.php` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞

- `ajax/` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ AJAX –∑–∞–ø—Ä–æ—Å–æ–≤## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏

- `in/` - –≤—Ö–æ–¥—è—â–∏–µ webhook'–∏ –æ—Ç CIAN (—Ñ–∞–π–ª—ã —Ç–∏–ø–∞ `<hash>_<id>.php`)

### –ú–æ–¥—É–ª—å 1: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞–º–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:****–¢—Ä–µ–±—É–µ—Ç—Å—è:** –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (41, 23, 182 –∏ –¥—Ä.)

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ª–∏–Ω–∏—è–º–∏ –ë–∏—Ç—Ä–∏–∫—Å24### –ú–æ–¥—É–ª—å 2: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

**–¢—Ä–µ–±—É–µ—Ç—Å—è:** –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

---

### –ú–æ–¥—É–ª—å 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM

### 4. Domclick Messager (–î–æ–º–∫–ª–∏–∫ –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä)**–¢—Ä–µ–±—É–µ—Ç—Å—è:** –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞



**–ü—É—Ç—å:** `cassoftApp/market/domclickMessager/`---



**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º –î–æ–º–∫–ª–∏–∫ (–°–±–µ—Ä–±–∞–Ω–∫) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –ø–æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å



**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- `index.php` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞- –ß–µ—Ä–µ–∑ –ë–∏—Ç—Ä–∏–∫—Å24 OAuth

- `install.php` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞- (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)

- `install_connector.php` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞

- `ajax/` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- `in/` - –≤—Ö–æ–¥—è—â–∏–µ webhook'–∏ –æ—Ç –î–æ–º–∫–ª–∏–∫- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

- (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å CIAN Messager### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- –†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ª–∏–Ω–∏–∏ –ë–∏—Ç—Ä–∏–∫—Å24- –ü—Ä–æ–≤–µ—Ä–∫–∞ `$_POST` –∏ `$_FILES`

- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ —Ñ–∞–π–ª–æ–≤ (–º–∞–∫—Å. 50MB)

---- –ü—Ä–æ–≤–µ—Ä–∫–∞ MIME-—Ç–∏–ø–æ–≤

- (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)

### 5. HR (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º)

---

**–ü—É—Ç–∏:**

- `cassoftApp/market/hr/` - —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- `cs-app/hr/` - –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è

### PHP –õ–∏–º–∏—Ç—ã

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º: —É—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –æ—Ç–ø—É—Å–∫–∞, –±–æ–ª—å–Ω–∏—á–Ω—ã–µ, —Ç–∞–±–µ–ª–∏```ini

upload_max_filesize = 50M

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `dashboard:main_app` (template: `hr_pro`)post_max_size = 100M

max_file_uploads = 100

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**max_input_vars = 10000

- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π layout (`templateType='vertical'`)memory_limit = 256M

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –ë–∏—Ç—Ä–∏–∫—Å24```



---### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- (—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)

### 6. Scan Doc (–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–ü—É—Ç—å:** `cassoftApp/market/scanDoc/`- (—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)



**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∫–æ–ø–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–∞—Ä—Ç–æ—á–∫–∏ CRM –ë–∏—Ç—Ä–∏–∫—Å24---



**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

- `index.php` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24 Drive –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤### Production

- **–°–µ—Ä–≤–µ—Ä:** 83.220.174.34

---- **–ü—É—Ç—å:** `/var/www/bitirx-brokci/data/www/app.cassoft.ru`

- **–î–æ—Å—Ç—É–ø:** SSH —á–µ—Ä–µ–∑ `id_ed25519_cassoft`

### 7. TGStat (–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Telegram) üî¥ –£–°–¢–ê–†–ï–õ–û

### CI/CD

**–ü—É—Ç—å:** `cassoftApp/market/tgstat/`- **–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:** GitHub Actions –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

- **Workflow:** —Å–º. [git-workflow.instructions.md](git-workflow.instructions.md)

**–°—Ç–∞—Ç—É—Å:** –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –Ω–∞ –¥—Ä—É–≥–æ–π –ø—Ä–æ–µ–∫—Ç, –æ—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

---

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Telegram –∫–∞–Ω–∞–ª–æ–≤

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### –õ–æ–≥–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞- **PHP errors:** `/var/log/php8.2-fpm/error.log`

- **Application logs:** (—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ)

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–ª–µ–¥—É—é—Ç –µ–¥–∏–Ω–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É:- (—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)



1. **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞** (`index.php`):---

   - –ü—Ä–æ–≤–µ—Ä–∫–∞ `member_id` (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ë–∏—Ç—Ä–∏–∫—Å24)

   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ Highload –±–ª–æ–∫ `app_{–Ω–∞–∑–≤–∞–Ω–∏–µ}_access`## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `dashboard:main_app`

### –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

2. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**:- üìã –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑

   ```php

   $auth = new \CSlibs\B24\Auth\Auth($arParams['app'], [], $arParams['member_id']);### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

   $user = $auth->CScore->call("user.current");- –õ–∏–º–∏—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞: 50MB

   ```- –ú–∞–∫—Å–∏–º—É–º —Ñ–∞–π–ª–æ–≤ –∑–∞ —Ä–∞–∑: 100

- (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)

3. **–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**:

   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `/local/components/dashboard/main_app/`---

   - –®–∞–±–ª–æ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

   - AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ —à–∞–±–ª–æ–Ω–∞—Ö## –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è



4. **Frontend –ø–∞—Ç—Ç–µ—Ä–Ω**:### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏

   ```javascript1. –ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

   function switchTemplate(type) {2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Git –∏ GitHub

       $.ajax({3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD

           url: "/local/components/dashboard/main_app/templates/{app}/ajax.php",4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

           data: { member_id, app, type, user_id },

           success: function(response) {### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏

               $('#main').html(response);1. –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Vue 3 + Nuxt 3

           }2. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

       });3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

   }4. –£–ª—É—á—à–µ–Ω–∏–µ UX

   ```

–°–º. [MIGRATION_STRATEGY.md](MIGRATION_STRATEGY.md) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ë–∏—Ç—Ä–∏–∫—Å24

---

#### 1. `dashboard:main_app`

**–ü—É—Ç—å:** `/local/components/dashboard/main_app/`**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 11 –Ω–æ—è–±—Ä—è 2025 –≥.  

**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ  

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∫–æ–¥–∞


**–®–∞–±–ª–æ–Ω—ã:**
- `mcm` - –º—É–ª—å—Ç–∏–∫–∞–Ω–∞–ª—å–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
- `change_assigned` - —Å–º–µ–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- `hr_pro` - HR –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `base` - –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
- `vertical` - –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π layout
- –î—Ä—É–≥–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**–õ–æ–≥–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
```php
// component.php
$auth = new \CSlibs\B24\Auth\Auth($arParams['app'], [], $arParams['member_id']);
$user = $auth->CScore->call("user.current");
$arResult["app"] = $arParams['app'];
$arResult['user_id'] = $user['ID'];
$templateType = $arParams['templateType'] ?? '';
$this->IncludeComponentTemplate($templateType);
```

#### 2. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `dashboard:clients` - —Ä–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- `messager:mcm` - –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
- `event:*` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

---

## REST API –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
- `user.current` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `user.get` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID

**CRM:**
- `crm.deal.get` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
- `crm.deal.update` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
- `crm.deal.fields` - –ø–æ–ª—è —Å–¥–µ–ª–∫–∏
- `crm.contact.get` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `crm.contact.update` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `crm.company.get` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
- `crm.company.update` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏

**–î–∏—Å–∫:**
- `disk.folder.uploadfile` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
- `disk.folder.getchildren` - —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤

**–ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã (–¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤):**
- `imconnector.send` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- `imconnector.register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ CRest

–í—Å–µ –≤—ã–∑–æ–≤—ã API —á–µ—Ä–µ–∑ –æ–±–µ—Ä—Ç–∫—É:
```php
use CSlibs\B24\Auth\Auth;
$auth = new Auth($app, [], $member_id);
$result = $auth->CScore->call($method, $params);
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Highload –±–ª–æ–∫–∏

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è Highload –±–ª–æ–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:
- `app_mcm_access` - –¥–æ—Å—Ç—É–ø –∫ MCM
- `app_change_assigned_access` - –¥–æ—Å—Ç—É–ø –∫ —Å–º–µ–Ω–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- `app_hr_access` - –¥–æ—Å—Ç—É–ø –∫ HR
- –ò —Ç.–¥.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏:**
```php
[
    'ID' => int,
    'UF_MEMBER_ID' => string, // member_id —É—Å—Ç–∞–Ω–æ–≤–∫–∏
    'UF_ACTIVE' => bool,
    'UF_SETTINGS' => string    // JSON —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
]
```

---

## –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ –ë–∏—Ç—Ä–∏–∫—Å24 Marketplace
2. `install.php` —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ Highload –±–ª–æ–∫–µ
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ë–∏—Ç—Ä–∏–∫—Å24

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞

```php
$HlClientApp = new \CSlibs\B24\HL\HlService($appAccess);
$clientsApp = $HlClientApp->searchID($memberId);
if ($clientsApp["ID"] > 0) {
    // –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω
} else {
    // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏
}
```

### –†–∞–±–æ—Ç–∞ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤ (MCM, CIAN, Domclick)

1. **–í—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:** webhook ‚Üí `/in/<hash>_<id>.php`
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞:** —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–∞/—Å–¥–µ–ª–∫–∏ –≤ CRM
3. **–û—Ç–∫—Ä—ã—Ç–∞—è –ª–∏–Ω–∏—è:** —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –¥–∏–∞–ª–æ–≥ –ë–∏—Ç—Ä–∏–∫—Å24
4. **–û—Ç–≤–µ—Ç:** —á–µ—Ä–µ–∑ `imconnector.send`

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ—É–Ω–∫—Ü–∏—é `p()` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
```php
$log = __DIR__ . "/logIndex.txt";
p($_POST, "start", $log);
```

–§–∞–π–ª—ã –ª–æ–≥–æ–≤:
- `logIndex.txt` - –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
- `logComp.txt` - –ª–æ–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `logContactUpdate.txt` - –ª–æ–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

---

## Deployment

**Production —Å–µ—Ä–≤–µ—Ä:**
- Host: `83.220.174.34`
- User: `bitirx-brokci`
- Path: `/var/www/bitirx-brokci/data/www/app.cassoft.ru`

**–ê–≤—Ç–æ–¥–µ–ø–ª–æ–π:**
- GitHub Actions –ø—Ä–∏ push –≤ `main`
- –ö–æ–º–∞–Ω–¥–∞: `git pull origin main`

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 12 –Ω–æ—è–±—Ä—è 2025 –≥.  
**–°—Ç–∞—Ç—É—Å:** –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è REST API –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
